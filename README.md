![bash-small](https://user-images.githubusercontent.com/13176091/54089754-070c6c00-4375-11e9-8495-d06e9d5f3fe3.png)

## Test Internet Chenge GW

Проверка наличия интернета и переключения шлюзов

***
#### Краткое описание

Программа для проверки наличия интернета на двух шлюзах. Шлюз1 используется по умолчанию, Шлюз2 резервный. Если на Шлюз1 интернет по каким-либо причинам отсутсвует, программа переключает на использование Шлюз2. После чего проверяет доступность интернета на этом шлюзе. Если интернет на Шлюз2 так же не доступен, программа завершается с кодом 1. 

Повторный запуск программы выполняется с помощью Cron с интервалом 5-10 минут. При повторном запуске программа проверяет какой шлюз используется. Если использовался Шлюз2, происходит возврат к использованию Шлюз1 и происходит проверка интернета. Если интернет вновь стал доступен, программа завершается с кодом 0. Если же интернет на Шлюз1 не доступен происходит возрат к использованию Шлюз2.

#### Настройка для использования программы
* Назначаем сетевому интерфейсу 2 ip адреса

Если тспользуется файл `/etc/network/interfaces`
```bash
auto lo
iface lo inet loopback

auto eth0 
iface eth0 inet static
    address 192.168.1.215
    netmask 255.255.255.0
    gateway 192.168.1.1
    dns-nameservers 8.8.8.8 208.67.222.222 

auto eth0:0
iface eth0:0 inet static
    address 192.168.2.215
    netmask 255.255.255.0
```

или таким образом, если один из адресов назнчается DHCP сервером

```bash
auto lo
iface lo inet loopback

auto eth0
iface eth0 inet dhcp
dns-nameservers 8.8.8.8 208.67.222.222

auto eth0:0
iface eth0:0 inet static
    address 192.168.2.106
    netmask 255.255.255.0
````


